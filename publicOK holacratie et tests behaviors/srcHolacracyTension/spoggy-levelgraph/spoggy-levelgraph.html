<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="./levelgraph-behavior.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">


<dom-module id="spoggy-levelgraph">
  <template>
    <style>
    :host {
    /*  display: block;  // interfere avec la balise hidden sur l'element spoggy-app sous chrome, mais pas sous firefox ??*/
    }
    </style>
    <!--<h2>Hello [[prop1]]!</h2>-->
        <!--<paper-button raised id="el"  on-tap="_initlevelgraph">Init levelgraph</paper-button>-->
        <!--  <paper-button raised id="el"  on-tap="_testVisBehavior">test Vis BEhavior</paper-button>-->
  </template>

  <script>
    /**
     * `spoggy-levelgraph`
     *
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class SpoggyLevelgraph extends LevelgraphBehaviorMixin(Polymer.Element) {
      static get is() { return 'spoggy-levelgraph'; }
      static get properties() {
        return {
              lg:{
            type: Object,
            notify: true
          }
        };
      }



      ready() {
    super.ready();

  //  console.log("init levelgraph");
  //  lg.base.init("spoggy", this._baseOk);
/*  this.db = this.initLevelGraph(this, "spoggy",this._dbOk);
    console.log(this.db);
    var stream = this.db.getStream({ });
let lg = this

    stream.on("data", function(data) {
      console.log(data);
      var visTriplet = lg.level_to_Vis_Triplet(data);
      if (visTriplet.node != undefined){
        lg.addNodeToVis(visTriplet.node);
      }
      if (visTriplet.edge != undefined){
        lg.addEdgeToVis(visTriplet.edge);
      }
    });*/

    // When possible, use afterNextRender to defer non-critical    // work until after first paint.
    /*Polymer.RenderStatus.afterNextRender(this, function() {
    //  console.log(this.network);
    //  this.network.fit();
    this.network.moveTo(this.network.body.data.nodes.get(1));
    });*/
  //  var app = this;
  this.lg.log("patatos ");
//  this.lg.log("patate")
    }
  /*  _initlevelgraph(){
      this.db = this.initLevelGraph(this, "spoggy",this._dbOk);
      console.log(this.db)
    }
    _dbOk(date){
      console.log("la db est ok en callback "+date);
    }*/

    _testVisBehavior(){
    this.vis.log("spoggy levelgraph test  VIS LOG ");
    }






    }



    window.customElements.define(SpoggyLevelgraph.is, SpoggyLevelgraph);
  </script>
</dom-module>
