<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="./network-behavior.html">
<link rel="import" href="./spoggy-graph-dialogs.html">


<script src="../../bower_components/vis/dist/vis.min.js"></script>
<link rel="import" href="styles/vis-styles.html">
<link rel="import" href="styles/graphe-styles.html">

<script src="lib/commandes.js"></script>
<script src="lib/import-export.js"></script>

<dom-module id="spoggy-graph-network">
  <template>
    <style include="graphe-styles"></style>
    <style include="vis-styles"></style>
    <style>
    #fabsetting {
      position: fixed;
      right: 25px;
      top: 100px;
    }
    #fabEye {
      position: fixed;
      right: 25px;
      top: 175px;
    }
    paper-button{background-color:#0D578B;color:white}
    </style>

    [[test]]
    <spoggy-graph-dialogs id="dialogs"></spoggy-graph-dialogs>
        <paper-button raised   on-tap="_testlgBehavior">test Levelgraph BEhavior</paper-button>-->
    <div id="mynetwork"></div>

  </template>

  <script>
  /**
  * `spoggy-network`
  *
  *
  * @customElement
  * @polymer
  * @demo demo/index.html
  */
  class SpoggyGraphNetwork extends NetworkBehaviorMixin(Polymer.Element) {
    static get is() { return 'spoggy-graph-network'; }
    static get properties() {
      return {
        prop1: {
          type: String,
          value: 'spoggy-graph-network'
        },

        vis:{
          type: Object,
          notify: true,
          observable:"_visChanged"
        }
      };
    }

    _testlgBehavior(){
    this.lg.log("spoggy graph network   LG LOG ");
    }
    _graphOk(date){
      console.log("le graph est ok en callback "+date);
    }

    _visChanged(){
      console.log("VIS CHANGED NETWORK GRAPH");
      console.log(vis);
    }
    /*  ready(){
    // If you override ready, always call super.ready() first.
    super.ready();
    // Output the custom element's HTML tag to the browser console.
    // Open your browser's developer tools to view the output.
    console.log(this.tagName);
  }*/
  ready() {
    super.ready();
    this.vis.log("spoggy graph network VIS LOG ");
    this.vis.network = this.networkDivInitialize(this.$.mynetwork, this, this.$.dialogs, this._graphOk);
    // When possible, use afterNextRender to defer non-critical    // work until after first paint.
    /*Polymer.RenderStatus.afterNextRender(this, function() {
    //  console.log(this.network);
    //  this.network.fit();
    this.network.moveTo(this.network.body.data.nodes.get(1));
  });*/
  this.visTest();
  console.log(this.bidule);
  /*  let app = this;
  setInterval(function(){
  app.test = this.bidule;
  console.log("UP "+this.bidule);
}, 5000);*/
}
}

window.customElements.define(SpoggyGraphNetwork.is, SpoggyGraphNetwork);
</script>
</dom-module>
