


<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<script src="agents/InputAgent.js"></script>
<link rel="import" href="./input-behavior.html">

<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<!--<link rel="import" href="../../bower_components/chat-window/chat-window.html">-->

<link rel="import" href="./input-styles.html">
<dom-module id="spoggy-input">
  <template>
    <style is="custom-style" include="input-styles">
    .inputbtn{
      @apply --layout-horizontal;
      @apply --layout-flex;
    }
    #fabAide {
      position: fixed;
      right: 5px;
      top: 10px;
    }
    </style>
<!--
    <style is="custom-style">
    chat-window.styled {
      font-size: small;
      *position: absolute;
      top: 100px;
      --chat-messages-height: 12em;
      --paper-input-container-input: {
        margin: 0 2px;
        z-index:100;
      }
      --chat-message-text: {
        z-index:100;
        background-color: #f0f0f0;
        padding: 6px 8px;
        margin: 4px 0;
        border-radius: 6px;
      };

      }
    }
  }
  </style>
-->



  <!--  <spoggy-tools id='tools' lazyRegister sources="{{sources}}" network={{network}}></spoggy-tools> -->
                <paper-input id="inputMessage"
                class="inputMessage"
                on-change="traiteMessage"
                label="3 mots une virgule et EntrÃ©e"
                raised
                autofocus>
              </paper-input>
        <!--    <chat-window
            id = "chat"
            class="styled"
            author="me"
            single-line
            input-text="{{text}}"
            messages="[[messages]]"
            on-send="sendMsg"
            ></chat-window>-->
<!--
          <chat-input
          author="me"
          class="styled"
          single-line
          single-line="[[singleLine]]"
          icon="[[sendIcon]]"
          text="{{inputText}}"
          on-send="sendMsg"></chat-input>

          <chat-messages
          class="styled"
          id = "chat"
          author="[[author]]"
          author-icon="[[authorIcon]]"
          others-icons="[[othersIcons]]"
          default-icon="[[defaultIcon]]"
          messages="[[messages]]"
          date-format="[[dateFormat]]"
          auto-scroll="[[autoScroll]]">
        </chat-messages>
-->
        <!--<div style="align:right">
        <paper-icon-button icon="help" on-tap="afficheAide"></paper-icon-button>
      </div>-->
      <paper-fab id="fabAide" on-tap="afficheAide"  icon="help" style="height: 50px; width:50px;"></paper-fab>

    </template>

    <script>
    /**
    * `spoggy-input`
    *
    *
    * @customElement
    * @polymer
    * @demo demo/index.html
    */
    class SpoggyInput extends InputBehaviorMixin(Polymer.LazyImportsMixin(Polymer.Element)) {
      static get is() { return 'spoggy-input'; }
      static get properties() {
        return {
          commandHistory:{
            type : Array,
            value: []
          },
        /*  sources:{
            type: Array,
            notify: true
          },
        */
        };
      }

      constructor(){
        super();
        this.agentInput = new InputAgent('agentInput', this);
        Polymer.RenderStatus.afterNextRender(this, function() {
          this._deferred();
        });
      }
      _deferred(){
          this.initAgents()
      }
      initAgents(){
        this.agentInput.send('agentHello', 'Hello agentHello!');
      }

    }

    window.customElements.define(SpoggyInput.is, SpoggyInput);
    </script>
  </dom-module>
